実験環境の解説
==================================================

1. UEC VPN 環境の準備
------------------------------------------

この実験では，IED/CED の GPU マシンを使います．
(Google Colab とかでも演習はできると思いますが，Colab は使うほど遅いTPUに割り当てられる傾向が見れるので
無料使用の枠での実行はお勧めしません)

IED/CEDにつなぐには大学側のネットワークにホストを入れておく必要があります．
このため大学側と Virtual Private Network (VPN) を形成する必要があります．
IED/CED の計算機で作業する場合は必要ないですが，自宅などから繋いで演習実験を
行う場合は必須ですので情報基盤センターの指示にしたがって VPN を構築する必要があります．
詳細は下記を参照してください．

https://www.cc.uec.ac.jp/ug/ja/remote/vpn/index.html

なお，前期のプログラミング言語実験でやったように，
トンネルを掘って IED のホストそのものをGUIとして使うことは
必須ではなく，Web ブラウザと端末ソフトウェアがあれば，実験遂行は可能です．



2. Proxy サービスの設定
---------------------------------------------------------------------   

IED/CED の GPUを使う場合は，学内サービスには Proxy を用いずに，学外のサービスのみを
Proxy に設定する必要があります．
下記のような形で proxy の除外設定をいれておいてください．

.. code-block:: bash

   `proxy.uec.ac.jp:8080`
   `172.21.0.0/16`
   `*ied.inf.uec.ac.jp`
   `*ced.cei.uec.ac.jp`


面倒であれば，学内の ホストは proxy を使わない

* `*uec.ac.jp`

という選択でもOKです（たぶん）．



3. IEDでJupyterHub を使うための準備
------------------------------------------

この実験では，Webブラウザを介して ``python`` での実験を行います．
そのための環境は ``Jupyter`` を用います．
前期のプログラミング言語実験 python で行った環境とほぼ一緒です．

ちょっと違うのは Jupyter を提供してくれるのが計算機サーバになっている点で
GPU も使えます．このため IED の GPU サーバーをホストとして JupyterHub と呼ばれるサービスにアクセスします．


IED で JupyterHub を使うためには，まず，Jupyter のノートの保管場所を作る必要があります．
これは，各アカウントホームディレクトリ下にある． `~/notebook` フォルダが指定されています．

まず ``sol.edu.cc.uec.ac.jp`` へログインして， `IED_HOME` の下に
`notebook` ディレクトリを作ります．

.. code-block:: sh

   $ ssh sol.edu.cc.uec.ac.jp

この時点で， `~/IED_HOME/notebook` が在るかを確認してください．
なければ，

.. code-block:: sh

   $ cd IED_HOME
   $ mkdir notebook

のようにして，空のディレクトリを作ってもらえるようにしてもらえればOKです．

4. Jupyter による実験
------------------------------------------

大学内のネットワークに繋げない場合は，VPN設定とプロキシ設定を確認してください．

この実験では，いずれの課題もGPUを数時間専有することが必要です.
これらの GPU サーバへは，Web を解してアクセスし，実験は Jupyter notebook を用いることになります．
今年から IEDの72個のGPUがありますが，一人１個のGPU割り当てようとすると若干足りないので，
授業内で説明するルールでGPU を割り振りたいと思います．

なお GPU の空きに関しては

http://gpu1.ied.inf.uec.ac.jp/

を確認してください．

ガイダンスで説明したGPUサーバーを選択してください．
すると，Sign in ウィンドウが開きますので，ここで，
大学アカウントのユーザー名とパスワードを入れてください．

このとき，前述の `notebook` ディレクトリがないとエラーが起きます．

適当に Jupyter notebook を作ると `notebook` ディレクトリにファイルができるので
確認してください．


